# 웹브라우저의 자바스크립트

Window객체는 클라이언트 측 자바스크립트의 기능과 API에서 핵심적인 진입점이다.
- 웹브라우저의 창이나 프레임
- 특정 창을 window 객체로 참조 가능
</br>
클라이언트 및 자바스크립트에서는 window가 전역객체. 최상의 객체이다.


### 웹문서의 자바스크립트
Document객체와 Element객체를 통해서 문서내용을 탐색,조작할 수 있다.
예시)</br>
- 애니메이션과, 시각적 효과를 사용한 페이지 네비게이션
- 사용자가 원하는 것을 찾기 쉽도록 표의 열 정렬
- 점진적 정보공개

<br>

### 웹 애플리케이션의 자바스크립트
웹브라우저는 문서를 보여주는 도구를 넘어 OS로 존재한다. OS는 네트워킹, 그래픽 처리, 파일 저장같은 저수준 API를 정의한다.
우리는 브라우저가 제공하는 (네트워킹, 그래핑, 데이터 스토리지 같은) 확장된 서비스를 이용하기 위해 자바스크립트를 사용한 웹페이지를 웹애플리케이션이라고 정의할 수 있다.
확장된 서비스 중 가장 유명한 것은 XMLHttpRequest객체다. 이 객체를 이용해서 HTTP요청을 짜면 브라우저 외부와 네트워킹을 할 수 있다.

<br>

### HTML 안의 이벤트 핸들러
HTML파일을 부른 후 상호작용이 일어나게 하기 위해서는, 반드시 이벤트 핸들러를 정의해야 한다. 
보통 이벤트 핸들러 속성은 간단히 지정하거나, 다른 곳에 정의한 함수를 단순히 호출하는 것으로 구성한다.
- 실제 스크립트 코드를 <script> 태그 안에 유지할 수 있음

```HTML
<input type="checkbox" name="options" value="giftwrap" onchange="order.options. giftwrap=this.checked;">
```

<br>

### 동기, 비동기, 연기된 스크립트
HTML 파서는 <script>요소를 만나면, 문서 파싱과 렌더링을 진행하기 전에 기본적으로 스크립트를 먼저 실행함.
그래서 내장스크립트일 때는 상관없지만, 스크립트 소스가 src속성에 지정된 외부파일이면, 스크립트를 모두 다운로드하고 실행을 완료할 때까지
스크립트 아래쪽의 문서 내용은 브라우저에 보이지 않는다.
'동기화' 혹은 '차단' 문제는 설정값이 기본값일 때 발생한다.
- defer : 브라우저는 문서를 모두 불러오고 파싱해서 조작할 준비가 끝날 때까지 스크립트 실행을 미룸
- async : 스크립트를 다운로드하는 동안에도 문서 파싱을 계속 하고, 문서 파싱 완료와 관계없이 가급적 빨리 스크립트 실행한다.

<br>

### 이벤트가 주도하는 자바스크립트
이벤트와 이벤트 핸들링 주로
- click
- change
- load
- mouseover
- keypress
- readystatechange
같은 이름이 붙는다. 또한 이벤트가 일어난 객체를 대상으로 삼는다. <br>
프로그램이 이벤트에 응답하게 하려면, 이벤트 핸들러, 이벤트 리스너 경우에 따라서 콜백이라고도 하는 함수를 작성해야한다.
그리고 이벤트가 발생했을 때 적용되도록 함수를 등록함.<br>
대부분의 브라우저는 거의 모든 이벤트에 대해 이벤트 핸들러에 이벤트 객체를 전달인자로 넘기고, 이벤트 객체의 프로퍼티로 이벤트에 대한 상세 정보를 제공한다. 이벤트 핸들러의 리턴값은 함수가 이벤트를 적절히 처리했는지를 확인하거나 다른 기본 동작을 막기 위해 사용한다.
이벤트 타깃이 문서 요소일 때는 이벤트가 문서 계층 구조를 따라 상위로 올라가는데, 이를 버블링과정이라고 한다.

<br>

### 클라이언트 측 자바스크립트 스레드 모델
코어 자바스크립트 언어는 스레드 메커니즘을 다루지 않는다. HTML5에 와서야 백그라운드 스레드의 한 종류인 웹워커가 정의됐다.

<br>

### 클라이언트 측 자바스크립트 실행 순서
자바스크립트 프로그램 실행 순서를 자세히 알아보면
1. 웹브라우저는 Document 객체를 생성하고 웹페이지 분석을 시작, HTML요소와 텍스트 내용을 분석해서 Element객체와 Text노드를 웹페이지 문서에 추가.
이 때, <code>document.readyState</code> 속성값은 'loading'
2. HTML 분석기가 async나 defer 속성이 없는 <script>요소와 만나면, 문서에 추가하고 내장스크립트 건 외부파일이건 구분없이 실행한다. 
3. HTML 분석기가 async 속성이 지정된 <script>요소를 만나면 스크립트 텍스트 다운로드시작, 문서 분석 지속.
4. 문서분석 완료 후 <code>document.readyState</code> 속성값은 'interactive'
5. defer 속성이 있는 스크립트는 문서 내에 나타나는 순서대로 실행된다. 
6. 브라우저 Document 객체에서 DOMContentLoaded 이벤트를 일으킨다. 동기스크립트단계 -> 비동기 모드 이벤트 주도단계
7. 브라우저는 이 시점에서 문서를 완전히 분석, 그러나 추가로 불러와야하는 내용을 기다릴 수 있음. <code>document.readyState</code> 속성값은 'complete' 
8. 이 시점부터 이벤트 핸들러는 사용자 입력 이벤트, 네트워크 이벤트, 타이머 만료 등의 응답으로 비동기 호출된다.

<br>

### 호환성과 상호운용성
미구현기능과 버그

<br>

### 등급별 브라우저 지원
등급별 브라우저 지원 살펴보기

<br>

### 접근성
웹접근성에 따라 자바스크립트 코드도 따라야 한다. 자바스크립트 접근성과 관련된 가장 중요한 원칙은 자바스크립트를 적용한 페이지가 자바스크립트 인터프리터를 끄고도 (어떠한 형태로든) 활용할 수 있도록 코드를 설계하는 것이다.

<br>

### 보안
웹브라우저에 인터프리터가 있다는 것은 웹페이지를 불러오는 순간 우리 PC에 임의의 자바스크립트 코드가 실행될 수도 있다는 뜻이다.
악성코드에 대한 웹브라우저의 1차적인 방어책은 특정 기능을 제공하지 않는 것이다.
- JS는 클라이언트 PC에서 임의로 디렉터리와 파일을 만들거나 지울 수 없다.
- 범용 네트워킹 기능이 없다.
2차적인 방어책은 브라우저가 지원하는 어떤 기능에 사용제약을 두는 것이다.
- 브라우저에서 새창을 열수 있으나 새창열기를 막아두고 사용자가 하게끔한다.
- HTML FileUpload 요소의 value 속성은 값을 불러올 수는 있지만 지정은 불가.
- 스크립트는 자신이 실행된 문서의 서버와 다른 서버에서 불러온 문서의 내용은 읽을 수 없다.
- 동일출처정책 참고

<br>

### 크로스 사이트 스크립팅
XSS는 사이트 공격자가 목표 사이트에 HTML 태그나 스크립트를 맘대로 집어넣는 보안문제를 일컫는 말이다.

<br>

### 서비스 거부 공격
서비스 거부 공격







